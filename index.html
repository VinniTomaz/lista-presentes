<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Lista de Presentes ğŸ</title>
  <style>
    body {
      font-family: Arial;
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
    }
    li {
      padding: 10px;
      background: #f0f0f0;
      border-radius: 8px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    button {
      padding: 6px 10px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      background: #3f8cff;
      color: white;
    }
  </style>
</head>
<body>
  <h1>ğŸ‚ Lista de Presentes ğŸ</h1>

  <input type="text" id="input" placeholder="Digite um presente...">
  <button onclick="addPresente()">Adicionar</button>

  <ul id="lista"></ul>

<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbyM1CO5KqSYOMVh8meVWzT6VQzSNgA2CdrXrLhIdaSxBcHgYQ_xP50tgxpczdzyHgJ7FQ/exec";

  async function carregarPresentes() {
    const resp = await fetch(API_URL);
    const data = await resp.json();
    const lista = document.getElementById("lista");
    lista.innerHTML = "";

    data.forEach(item => {
      const li = document.createElement("li");
      li.innerHTML = `
        ${item.nome} â€“ <strong>${item.status}</strong>
        ${item.status === "disponÃ­vel" ? `<button onclick="reservar(${item.id})">Reservar</button>` : ""}
      `;
      lista.appendChild(li);
    });
  }

  async function addPresente() {
    const nome = document.getElementById("input").value;
    if (!nome) return;

    const id = Date.now(); // gera um ID Ãºnico

    await fetch(API_URL, {
      method: "POST",
      body: JSON.stringify({
        id,
        nome,
        status: "disponÃ­vel"
      })
    });

    document.getElementById("input").value = "";
    carregarPresentes();
  }

  async function reservar(id) {
    await fetch(API_URL, {
      method: "PUT",
      body: JSON.stringify({
        id,
        status: "reservado ğŸ‰"
      })
    });

    carregarPresentes();
  }

  carregarPresentes();
</script>
</body>
</html>
